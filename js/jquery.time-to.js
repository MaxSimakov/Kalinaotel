!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){function g(d,e){var j,k,l,m,n,o,p,q,r,f=this.data(),g=this.find("ul"),i=!1;if(f.vals&&0!==g.length){for(d||(d=f.seconds),f.intervalId&&(i=!0,clearTimeout(f.intervalId)),j=Math.floor(d/b),k=j*b,l=Math.floor((d-k)/c),k+=l*c,m=Math.floor((d-k)/60),k+=60*m,n=d-k,o=(j<100?"0"+(j<10?"0":""):"")+j+(l<10?"0":"")+l+(m<10?"0":"")+m+(n<10?"0":"")+n,p=f.vals.length-1,q=o.length-1;p>=0;p-=1,q-=1)r=parseInt(o.substr(q,1),10),f.vals[p]=r,g.eq(p).children().html(r);(i||e)&&(f.ttStartTime=a.now(),f.intervalId=setTimeout(h.bind(this),1e3),this.data("intervalId",f.intervalId))}}function h(b){var f,g,i,j,k,l,c=this,d=this.find("ul"),e=this.data();if(!e.vals||0===d.length)return e.intervalId&&(clearTimeout(e.intervalId),this.data("intervalId",null)),void(e.callback&&e.callback());void 0===b&&(b=e.iSec),f=e.vals[b],g=d.eq(b),i=g.children(),j=e.countdown?-1:1,i.eq(1).html(f),f+=j,b===e.iSec&&(k=e.tickTimeout,l=a.now()-e.ttStartTime,e.sec+=j,k+=Math.abs(e.seconds-e.sec)*k-l,e.intervalId=setTimeout(h.bind(this),k)),(f<0||f>e.limits[b])&&(f<0?(f=e.limits[b],b===e.iHour&&e.displayDays>0&&b>0&&0===e.vals[b-1]&&(f=3)):f=0,b>0&&h.call(this,b-1)),i.eq(0).html(f),a.support.transition?(g.addClass("transition"),g.css({top:0}),setTimeout(function(){g.removeClass("transition"),i.eq(1).html(f),g.css({top:"-"+e.height+"px"}),j>0||b!==e.iSec||(e.sec===e.countdownAlertLimit&&d.parent().addClass("timeTo-alert"),0===e.sec&&(d.parent().removeClass("timeTo-alert"),e.intervalId&&(clearTimeout(e.intervalId),c.data("intervalId",null)),"function"==typeof e.callback&&e.callback()))},410)):g.stop().animate({top:0},400,b!==e.iSec?null:function(){i.eq(1).html(f),g.css({top:"-"+e.height+"px"}),j>0||b!==e.iSec||(e.sec===e.countdownAlertLimit?d.parent().addClass("timeTo-alert"):0===e.sec&&(d.parent().removeClass("timeTo-alert"),e.intervalId&&(clearTimeout(e.intervalId),c.data("intervalId",null)),"function"==typeof e.callback&&e.callback()))}),e.vals[b]=f}var b=86400,c=3600,d={callback:null,captionSize:0,countdown:!0,countdownAlertLimit:10,displayCaptions:!1,displayDays:0,displayHours:!0,fontFamily:"Verdana, sans-serif",fontSize:0,lang:"en",languages:{},seconds:0,start:!0,theme:"white",width:25,height:30,gap:11,vals:[0,0,0,0,0,0,0,0,0],limits:[9,9,9,2,9,5,9,5,9],iSec:8,iHour:4,tickTimeout:1e3,intervalId:null},e={start:function(b){var c;b&&(g.call(this,b),c=setTimeout(h.bind(this),1e3),this.data("ttStartTime",a.now()),this.data("intervalId",c))},stop:function(){var a=this.data();return a.intervalId&&(clearTimeout(a.intervalId),this.data("intervalId",null)),a},reset:function(a){var b=e.stop.call(this),c=void 0===a?b.seconds:a;this.find("div").css({backgroundPosition:"left center"}),this.find("ul").parent().removeClass("timeTo-alert"),g.call(this,c,!0)}},f={en:{days:"days",hours:"hours",min:"minutes",sec:"seconds"},ru:{days:"дней",hours:"часов",min:"минут",sec:"секунд"},ua:{days:"днiв",hours:"годин",min:"хвилин",sec:"секунд"},de:{days:"Tag",hours:"Uhr",min:"Minuten",sec:"Secunden"},fr:{days:"jours",hours:"heures",min:"minutes",sec:"secondes"},sp:{days:"días",hours:"horas",min:"minutos",sec:"segundos"},it:{days:"giorni",hours:"ore",min:"minuti",sec:"secondi"},nl:{days:"dagen",hours:"uren",min:"minuten",sec:"seconden"},no:{days:"dager",hours:"timer",min:"minutter",sec:"sekunder"},pt:{days:"dias",hours:"horas",min:"minutos",sec:"segundos"},tr:{days:"gün",hours:"saat",min:"dakika",sec:"saniye"}};return void 0===a.support.transition&&(a.support.transition=function(){var a=document.body||document.documentElement,b=a.style;return void 0!==b.transition||void 0!==b.WebkitTransition||void 0!==b.MozTransition||void 0!==b.MsTransition||void 0!==b.OTransition}()),a.fn.timeTo=function(){var j,k,l,m,n,o,p,q,r,s,h={},i=a.now();for(j=0;j<arguments.length;j+=1)k=arguments[j],0===j&&"string"==typeof k?m=k:"object"==typeof k?"function"==typeof k.getTime?h.timeTo=k:h=a.extend(h,k):"function"==typeof k?h.callback=k:(l=parseInt(k,10),isNaN(l)||(h.seconds=l));if(h.timeTo)h.timeTo.getTime?n=h.timeTo.getTime():"number"==typeof h.timeTo&&(n=h.timeTo),h.seconds=n>i?Math.floor((n-i)/1e3):0;else if(h.time||!h.seconds)if(n=h.time,n||(n=new Date),"object"==typeof n&&n.getTime)h.seconds=n.getHours()*c+60*n.getMinutes()+n.getSeconds(),h.countdown=!1;else if("string"==typeof n){for(p=n.split(":"),q=0,r=1;p.length;)s=p.pop(),q+=s*r,r*=60;h.seconds=q,h.countdown=!1}return!1!==h.countdown&&h.seconds>b&&void 0===h.displayDays?(o=Math.floor(h.seconds/b),h.displayDays=o<10&&1||o<100&&2||3):!0===h.displayDays?h.displayDays=3:h.displayDays&&(h.displayDays=h.displayDays>0?Math.floor(h.displayDays):3),this.each(function(){var i,j,k,l,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,b=a(this),c=b.data();if(c.intervalId&&(clearInterval(c.intervalId),c.intervalId=null),c.vals)"reset"!==m&&a.extend(c,h);else{if(j=c.opt?c.options:h,i=Object.keys(d).reduce(function(a,b){return Array.isArray(d[b])?a[b]=d[b].slice(0):a[b]=d[b],a},{}),c=a.extend(i,j),c.options=j,c.height=Math.round(100*c.fontSize/93)||c.height,c.width=Math.round(.8*c.fontSize+.13*c.height)||c.width,c.displayHours=!(!c.displayDays&&!c.displayHours),l={fontFamily:c.fontFamily},c.fontSize>0&&(l.fontSize=c.fontSize+"px"),n=c.languages[c.lang]||f[c.lang],b.addClass("timeTo").addClass("timeTo-"+c.theme).css(l),o=Math.round(c.height/10),p='<ul style="left:'+o+"px; top:-"+c.height+'px"><li>0</li><li>0</li></ul></div>',q=c.fontSize?' style="width:'+c.width+"px; height:"+c.height+'px;"':' style=""',r='<div class="first"'+q+">"+p,s="<div"+q+">"+p,t="<span>:</span>",u=Math.round(2*c.width+3),v=c.captionSize||c.fontSize&&Math.round(.43*c.fontSize),w=v?"font-size:"+v+"px;":"",x=v?' style="'+w+'"':"",y=(c.displayCaptions?(c.displayHours?'<figure style="max-width:'+u+'px">$1<figcaption'+x+">"+n.hours+"</figcaption></figure>"+t:"")+'<figure style="max-width:'+u+'px">$1<figcaption'+x+">"+n.min+"</figcaption></figure>"+t+'<figure style="max-width:'+u+'px">$1<figcaption'+x+">"+n.sec+"</figcaption></figure>":(c.displayHours?"$1"+t:"")+"$1"+t+"$1").replace(/\$1/g,r+s),c.displayDays>0){for(z=.4*c.fontSize||d.gap,A=r,k=c.displayDays-1;k>0;k-=1)A+=1===k?s.replace('">',"margin-right:"+Math.round(z)+'px">'):s;y=(c.displayCaptions?'<figure style="width:'+Math.round(c.width*c.displayDays+z+4)+'px">$1<figcaption style="'+w+"padding-right:"+Math.round(z)+'px">'+n.days+"</figcaption></figure>":"$1").replace(/\$1/,A)+y}b.html(y)}if(B=b.find("div"),B.length<c.vals.length){for(C=c.vals.length-B.length,D=c.vals,E=c.limits,c.vals=[],c.limits=[],k=0;k<B.length;k+=1)c.vals[k]=D[C+k],c.limits[k]=E[C+k];c.iSec=c.vals.length-1,c.iHour=c.vals.length-5}c.sec=c.seconds,b.data(c),m&&e[m]?e[m].call(b,c.seconds):c.start?e.start.call(b,c.seconds):g.call(b,c.seconds)})},a});